#version 420 compatibility

in highp vec3 in_position;
in highp vec3 in_normal;
in highp vec2 in_texcoord;

in highp vec3 in_direction;

out highp vec3 out_lighting;

out highp vec3 out_normal;
out highp vec2 out_texcoord;

void main(){
	gl_Position = ftransform();
	
	highp vec3 normal = normalize(gl_NormalMatrix * in_normal);
	
	out_normal = normal;
	out_texcoord = in_texcoord;
	
	highp vec3 ambient = vec3(0.2, 0.2, 0.2);
    highp vec3 diffuse = vec3(0.51, 0.5, 0.58);
    highp vec3 sourceDirection = vec3(0, 1, -1);
	
	float directional = max(dot(normal, sourceDirection), 0.0);
    out_lighting = ambient + (diffuse * directional);
}